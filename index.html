<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Li√™n Qu√¢n Mobile - Uy T√≠n #1</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(45deg, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        nav {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            background: rgba(168, 85, 247, 0.2);
            border: 2px solid transparent;
            color: #fff;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
        }

        .nav-btn:hover {
            background: linear-gradient(45deg, #a855f7, #ec4899);
            border-color: #fff;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #a855f7, #ec4899);
            border-color: #fff;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 10px;
        }

        .balance {
            font-weight: bold;
            color: #fbbf24;
            font-size: 18px;
        }

        /* Pages */
        .page {
            display: none;
            animation: fadeIn 0.5s;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Auth Pages */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .auth-box {
            background: rgba(26, 26, 46, 0.9);
            padding: 40px;
            border-radius: 20px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(168, 85, 247, 0.3);
        }

        .auth-icon {
            font-size: 80px;
            text-align: center;
            margin-bottom: 20px;
        }

        .auth-title {
            text-align: center;
            font-size: 32px;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #d1d5db;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
        }

        .form-group input:focus {
            outline: none;
            border-color: #a855f7;
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.2);
        }

        .btn-primary {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #a855f7, #ec4899);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.5);
        }

        .auth-link {
            text-align: center;
            margin-top: 20px;
            color: #a855f7;
            cursor: pointer;
        }

        .auth-link:hover {
            text-decoration: underline;
        }

        /* Banner */
        .banner {
            background: linear-gradient(45deg, #a855f7, #ec4899, #ef4444);
            padding: 60px 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(168, 85, 247, 0.3);
        }

        .banner h1 {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .banner p {
            font-size: 24px;
            opacity: 0.9;
        }

        /* Search & Filter */
        .search-bar {
            background: rgba(26, 26, 46, 0.8);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
        }

        .search-input:focus {
            outline: none;
            border-color: #a855f7;
        }

        .filter-select {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            cursor: pointer;
        }

        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .product-card {
            background: rgba(26, 26, 46, 0.8);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s;
            border: 1px solid rgba(168, 85, 247, 0.2);
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(168, 85, 247, 0.3);
            border-color: #a855f7;
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .product-info {
            padding: 20px;
        }

        .product-rank {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #fbbf24;
        }

        .product-details {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
            color: #d1d5db;
        }

        .product-price {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 15px 0;
        }

        .btn-buy {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, #10b981, #059669);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-buy:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.5);
        }

        /* Rental Packages */
        .rental-banner {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .package-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .package-card {
            background: rgba(26, 26, 46, 0.8);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .package-card:hover {
            transform: scale(1.05);
            border-color: #a855f7;
        }

        .package-card.selected {
            border-color: #a855f7;
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
        }

        .package-icon {
            font-size: 60px;
            margin-bottom: 15px;
        }

        .stars {
            color: #fbbf24;
            margin: 10px 0;
        }

        /* Recharge */
        .recharge-methods {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .method-btn {
            flex: 1;
            min-width: 150px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 10px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .method-btn.active {
            background: linear-gradient(45deg, #a855f7, #ec4899);
            border-color: #fff;
        }

        .recharge-content {
            background: rgba(26, 26, 46, 0.8);
            padding: 30px;
            border-radius: 15px;
        }

        .qr-container {
            text-align: center;
            padding: 30px;
        }

        .qr-image {
            width: 300px;
            height: 300px;
            margin: 20px auto;
            background: #fff;
            border-radius: 15px;
        }

        /* History */
        .history-item {
            background: rgba(26, 26, 46, 0.8);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(168, 85, 247, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .history-icon {
            font-size: 40px;
        }

        .history-details {
            flex: 1;
        }

        .history-price {
            font-size: 24px;
            font-weight: bold;
            color: #ef4444;
        }

        .status-badge {
            background: #10b981;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
        }

        /* Account Page */
        .account-card {
            background: rgba(26, 26, 46, 0.8);
            padding: 40px;
            border-radius: 15px;
            border: 1px solid rgba(168, 85, 247, 0.3);
        }

        .avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, #a855f7, #ec4899);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            margin-bottom: 20px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #fbbf24;
        }

        .btn-logout {
            width: 100%;
            padding: 15px;
            background: #ef4444;
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        .btn-logout:hover {
            background: #dc2626;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
            }

            nav {
                width: 100%;
                justify-content: center;
            }

            .banner h1 {
                font-size: 32px;
            }

            .banner p {
                font-size: 18px;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #9ca3af;
        }

        .empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .rental-form {
            background: rgba(26, 26, 46, 0.8);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // Database
        const DB = {
            users: [
                { id: 1, email: 'demo@shop.com', password: '123456', name: 'Kh√°ch H√†ng Demo', balance: 500000 }
            ],
            accounts: [
                { id: 1, rank: 'Cao Th·ªß', heroes: 95, skins: 150, price: 299000, gems: 5000, image: 'https://via.placeholder.com/400x300/8B5CF6/ffffff?text=Cao+Thu', status: 'available' },
                { id: 2, rank: 'Tinh Anh', heroes: 80, skins: 120, price: 199000, gems: 3000, image: 'https://via.placeholder.com/400x300/EC4899/ffffff?text=Tinh+Anh', status: 'available' },
                { id: 3, rank: 'Kim C∆∞∆°ng', heroes: 70, skins: 90, price: 149000, gems: 2000, image: 'https://via.placeholder.com/400x300/3B82F6/ffffff?text=Kim+Cuong', status: 'available' },
                { id: 4, rank: 'B·∫°ch Kim', heroes: 60, skins: 70, price: 99000, gems: 1500, image: 'https://via.placeholder.com/400x300/10B981/ffffff?text=Bach+Kim', status: 'available' },
                { id: 5, rank: 'V√†ng', heroes: 50, skins: 50, price: 59000, gems: 1000, image: 'https://via.placeholder.com/400x300/F59E0B/ffffff?text=Vang', status: 'available' },
                { id: 6, rank: 'B·∫°c', heroes: 40, skins: 30, price: 39000, gems: 500, image: 'https://via.placeholder.com/400x300/6B7280/ffffff?text=Bac', status: 'available' }
            ],
            packages: [
                { id: 1, name: 'G√≥i ƒê·ªìng', stars: 1, price: 50000, time: '1 ng√†y', image: 'https://via.placeholder.com/300x200/CD7F32/ffffff?text=Goi+Dong' },
                { id: 2, name: 'G√≥i B·∫°c', stars: 2, price: 90000, time: '3 ng√†y', image: 'https://via.placeholder.com/300x200/C0C0C0/ffffff?text=Goi+Bac' },
                { id: 3, name: 'G√≥i V√†ng', stars: 3, price: 150000, time: '5 ng√†y', image: 'https://via.placeholder.com/300x200/FFD700/ffffff?text=Goi+Vang' },
                { id: 4, name: 'G√≥i Kim C∆∞∆°ng', stars: 5, price: 250000, time: '7 ng√†y', image: 'https://via.placeholder.com/300x200/B9F2FF/000000?text=Goi+Kim+Cuong' }
            ],
            history: []
        };

        // State
        let currentUser = { id: 0, name: 'Kh√°ch', email: 'guest@shop.com', balance: 0 };
        let isLoggedIn = false;
        let currentPage = 'home';
        let searchTerm = '';
        let filterRank = 'all';
        let selectedPackage = null;
        let rechargeMethod = 'card';

        // Render Functions
        function render() {
            const app = document.getElementById('app');
            
            if (!isLoggedIn) {
                app.innerHTML = renderAuthPage();
            } else {
                app.innerHTML = `
                    ${renderHeader()}
                    <div class="container">
                        ${renderCurrentPage()}
                    </div>
                `;
                attachEventListeners();
            }
        }

        function renderHeader() {
            return `
                <header>
                    <div class="container">
                        <div class="header-content">
                            <div class="logo">
                                ‚öîÔ∏è Shop Li√™n Qu√¢n
                            </div>
                            <nav>
                                <button class="nav-btn ${currentPage === 'home' ? 'active' : ''}" onclick="navigateTo('home')">Mua Acc</button>
                                <button class="nav-btn ${currentPage === 'rental' ? 'active' : ''}" onclick="navigateTo('rental')">C√†y Thu√™</button>
                                <button class="nav-btn ${currentPage === 'recharge' ? 'active' : ''}" onclick="navigateTo('recharge')">N·∫°p Ti·ªÅn</button>
                                <button class="nav-btn ${currentPage === 'history' ? 'active' : ''}" onclick="navigateTo('history')">L·ªãch S·ª≠</button>
                                <button class="nav-btn ${currentPage === 'account' ? 'active' : ''}" onclick="navigateTo('account')">T√†i Kho·∫£n</button>
                            </nav>
                            <div class="user-info">
                                ${isLoggedIn ? `
                                    <div>
                                        <div style="font-size: 12px; opacity: 0.7;">S·ªë d∆∞</div>
                                        <div class="balance">${formatMoney(currentUser.balance)}</div>
                                    </div>
                                ` : `
                                    <button class="btn-primary" style="padding: 10px 20px; width: auto;" onclick="showLogin()">
                                        üîê ƒêƒÉng Nh·∫≠p
                                    </button>
                                `}
                            </div>
                        </div>
                    </div>
                </header>
            `;
        }

        function renderAuthPage() {
            return `
                <div class="auth-container">
                    <div class="auth-box">
                        <div class="auth-icon">‚öîÔ∏è</div>
                        <h2 class="auth-title">Shop Li√™n Qu√¢n</h2>
                        <p style="text-align: center; color: #9ca3af; margin-bottom: 30px;">ƒêƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c</p>
                        <form onsubmit="handleLogin(event)">
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="email" placeholder="email@example.com" required>
                            </div>
                            <div class="form-group">
                                <label>M·∫≠t kh·∫©u</label>
                                <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                            </div>
                            <button type="submit" class="btn-primary">ƒêƒÉng Nh·∫≠p</button>
                        </form>
                        <div style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.2); border-radius: 10px; text-align: center; font-size: 12px; color: #9ca3af;">
                            T√†i kho·∫£n demo: demo@shop.com / 123456
                        </div>
                    </div>
                </div>
            `;
        }

        function renderCurrentPage() {
            switch(currentPage) {
                case 'home': return renderHomePage();
                case 'rental': return renderRentalPage();
                case 'recharge': return renderRechargePage();
                case 'history': return renderHistoryPage();
                case 'account': return renderAccountPage();
                default: return renderHomePage();
            }
        }

        function renderHomePage() {
            const filteredAccounts = DB.accounts.filter(acc => {
                const matchSearch = acc.rank.toLowerCase().includes(searchTerm.toLowerCase());
                const matchFilter = filterRank === 'all' || acc.rank === filterRank;
                return matchSearch && matchFilter && acc.status === 'available';
            });

            return `
                <div class="banner">
                    <h1>üî• Shop Acc Li√™n Qu√¢n Uy T√≠n</h1>
                    <p>Acc si√™u r·∫ª - Giao d·ªãch t·ª± ƒë·ªông - B·∫£o h√†nh chu ƒë√°o</p>
                </div>

                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="üîç T√¨m ki·∫øm theo rank..." 
                           value="${searchTerm}" onkeyup="handleSearch(event)">
                    <select class="filter-select" onchange="handleFilter(event)">
                        <option value="all">T·∫•t c·∫£ rank</option>
                        <option value="Cao Th·ªß">Cao Th·ªß</option>
                        <option value="Tinh Anh">Tinh Anh</option>
                        <option value="Kim C∆∞∆°ng">Kim C∆∞∆°ng</option>
                        <option value="B·∫°ch Kim">B·∫°ch Kim</option>
                        <option value="V√†ng">V√†ng</option>
                        <option value="B·∫°c">B·∫°c</option>
                    </select>
                </div>

                <div class="product-grid">
                    ${filteredAccounts.map(acc => `
                        <div class="product-card">
                            <img src="${acc.image}" alt="${acc.rank}" class="product-image">
                            <div class="product-info">
                                <div class="product-rank">${acc.rank}</div>
                                <div class="product-details">
                                    <div>üõ°Ô∏è T∆∞·ªõng: <strong>${acc.heroes}</strong></div>
                                    <div>‚≠ê Skin: <strong>${acc.skins}</strong></div>
                                    <div>üíé Ng·ªçc: <strong>${acc.gems}</strong></div>
                                </div>
                                <div class="product-price">${formatMoney(acc.price)}</div>
                                <button class="btn-buy" onclick="buyAccount(${acc.id})">Mua Ngay</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderRentalPage() {
            return `
                <div class="banner" style="background: linear-gradient(45deg, #f97316, #ef4444);">
                    <h1>‚ö° D·ªãch V·ª• C√†y Thu√™</h1>
                    <p>ƒê·ªôi ng≈© Cao Th·ªß gi√∫p b·∫°n l√™n rank nhanh ch√≥ng</p>
                </div>

                <img src="https://via.placeholder.com/1200x400/EF4444/ffffff?text=Dich+Vu+Cay+Thue+Lien+Quan" class="rental-banner" alt="C√†y thu√™">

                <div style="background: rgba(26, 26, 46, 0.8); padding: 30px; border-radius: 15px; margin-bottom: 30px;">
                    <h2 style="margin-bottom: 20px;">üåü Cam K·∫øt D·ªãch V·ª•</h2>
                    <div style="display: grid; gap: 10px; color: #d1d5db;">
                        <div>‚úÖ T·ª∑ l·ªá th·∫Øng 80% - ƒê·ªôi ng≈© Cao Th·ªß, Tinh Anh</div>
                        <div>‚úÖ B·∫£o m·∫≠t tuy·ªát ƒë·ªëi - Kh√¥ng l∆∞u m·∫≠t kh·∫©u</div>
                        <div>‚úÖ H·ªó tr·ª£ 24/7 - Lu√¥n s·∫µn s√†ng ph·ª•c v·ª•</div>
                        <div>‚úÖ Ho√†n ti·ªÅn n·∫øu kh√¥ng ƒë·∫°t rank cam k·∫øt</div>
                    </div>
                </div>

                <div class="package-grid">
                    ${DB.packages.map(pkg => `
                        <div class="package-card ${selectedPackage?.id === pkg.id ? 'selected' : ''}" 
                             onclick="selectPackage(${pkg.id})">
                            <img src="${pkg.image}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 10px; margin-bottom: 15px;" alt="${pkg.name}">
                            <h3>${pkg.name}</h3>
                            <div class="stars">${'‚≠ê'.repeat(pkg.stars)}</div>
                            <div style="font-size: 28px; font-weight: bold; color: #fbbf24; margin: 10px 0;">
                                ${formatMoney(pkg.price)}
                            </div>
                            <div style="color: #9ca3af;">${pkg.time}</div>
                        </div>
                    `).join('')}
                </div>

                ${selectedPackage ? `
                    <div class="rental-form">
                        <h2 style="margin-bottom: 20px;">üìù Th√¥ng Tin ƒê·∫∑t D·ªãch V·ª•</h2>
                        <div class="form-group">
                            <label>T√†i kho·∫£n game (ID ho·∫∑c t√™n ƒëƒÉng nh·∫≠p)</label>
                            <input type="text" id="accountInfo" placeholder="Nh·∫≠p t√†i kho·∫£n game c·ªßa b·∫°n">
                        </div>
                        <div class="form-group">
                            <label>Token x√°c th·ª±c (n·∫øu c√≥)</label>
                            <input type="text" id="tokenInfo" placeholder="Nh·∫≠p token ho·∫∑c m√£ x√°c th·ª±c">
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                            <div><strong>G√≥i ƒë√£ ch·ªçn:</strong> ${selectedPackage.name}</div>
                            <div style="color: #9ca3af; margin-top: 5px;">Th·ªùi gian: ${selectedPackage.time}</div>
                            <div style="color: #fbbf24; font-size: 24px; font-weight: bold; margin-top: 10px;">
                                Gi√°: ${formatMoney(selectedPackage.price)}
                            </div>
                        </div>
                        <button class="btn-primary" onclick="bookRental()">ƒê·∫∑t D·ªãch V·ª• Ngay</button>
                    </div>
                ` : ''}
            `;
        }

        function renderRechargePage() {
            return `
                <div class="banner" style="background: linear-gradient(45deg, #10b981, #059669);">
                    <h1>üí∞ N·∫°p Ti·ªÅn V√†o T√†i Kho·∫£n</h1>
                    <p>Nhi·ªÅu h√¨nh th·ª©c thanh to√°n ti·ªán l·ª£i</p>
                </div>

                <div class="recharge-methods">
                    <button class="method-btn ${rechargeMethod === 'card' ? 'active' : ''}" 
                            onclick="setRechargeMethod('card')">üí≥ Th·∫ª C√†o</button>
                    <button class="method-btn ${rechargeMethod === 'momo' ? 'active' : ''}" 
                            onclick="setRechargeMethod('momo')">üì± MoMo</button>
                    <button class="method-btn ${rechargeMethod === 'bank' ? 'active' : ''}" 
                            onclick="setRechargeMethod('bank')">üè¶ Banking</button>
                    <button class="method-btn ${rechargeMethod === 'code' ? 'active' : ''}" 
                            onclick="setRechargeMethod('code')">üéÅ Nh·∫≠p Code</button>
                </div>

                <div class="recharge-content">
                    ${renderRechargeContent()}
                </div>
            `;
        }

        function renderRechargeContent() {
            if (rechargeMethod === 'card') {
                return `
                    <div class="form-group">
                        <label>Lo·∫°i th·∫ª</label>
                        <select class="filter-select" style="width: 100%;" id="cardType">
                            <option value="viettel">Viettel</option>
                            <option value="vinaphone">Vinaphone</option>
                            <option value="mobifone">Mobifone</option>
                            <option value="vietnamobile">Vietnamobile</option>
                            <option value="zing">Zing</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>M·ªánh gi√°</label>
                        <select class="filter-select" style="width: 100%;" id="cardAmount">
                            <option value="">Ch·ªçn m·ªánh gi√°</option>
                            <option value="10000">10,000ƒë</option>
                            <option value="20000">20,000ƒë</option>
                            <option value="50000">50,000ƒë</option>
                            <option value="100000">100,000ƒë</option>
                            <option value="200000">200,000ƒë</option>
                            <option value="500000">500,000ƒë</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>S·ªë serial</label>
                        <input type="text" id="cardSerial" placeholder="Nh·∫≠p s·ªë serial">
                    </div>
                    <div class="form-group">
                        <label>M√£ th·∫ª</label>
                        <input type="text" id="cardCode" placeholder="Nh·∫≠p m√£ th·∫ª">
                    </div>
                    <button class="btn-primary" onclick="handleRecharge()">N·∫°p Th·∫ª</button>
                `;
            } else if (rechargeMethod === 'momo') {
                return `
                    <div class="qr-container">
                        <h3>üì± Qu√©t M√£ QR MoMo</h3>
                        <img src="https://via.placeholder.com/300x300/D60065/ffffff?text=QR+Code+MoMo" 
                             class="qr-image" alt="QR MoMo">
                        <div style="margin-top: 20px; color: #d1d5db;">
                            <p>S·ªë ƒëi·ªán tho·∫°i: <strong>0123456789</strong></p>
                            <p>Ch·ªß t√†i kho·∫£n: <strong>SHOP LIEN QUAN</strong></p>
                            <p style="color: #fbbf24; font-weight: bold; margin-top: 15px;">
                                N·ªôi dung: NAPTIEN ${currentUser.id}
                            </p>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="handleRecharge()">ƒê√£ Chuy·ªÉn Kho·∫£n</button>
                `;
            } else if (rechargeMethod === 'bank') {
                return `
                    <div class="qr-container">
                        <h3>üè¶ Qu√©t QR Banking</h3>
                        <img src="https://via.placeholder.com/300x300/007AC1/ffffff?text=QR+Code+Banking" 
                             class="qr-image" alt="QR Banking">
                        <div style="margin-top: 20px; color: #d1d5db; text-align: left; max-width: 400px; margin-left: auto; margin-right: auto;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Ng√¢n h√†ng:</span>
                                <strong>Vietcombank</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>S·ªë t√†i kho·∫£n:</span>
                                <strong>1234567890</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Ch·ªß t√†i kho·∫£n:</span>
                                <strong>NGUYEN VAN A</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Chi nh√°nh:</span>
                                <strong>TP. HCM</strong>
                            </div>
                            <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px; margin-top: 15px;">
                                <p style="color: #fbbf24; font-weight: bold; text-align: center;">
                                    N·ªôi dung: NAPTIEN ${currentUser.id}
                                </p>
                            </div>
                        </div>
                        <div style="background: rgba(59, 130, 246, 0.2); padding: 15px; border-radius: 10px; margin-top: 20px; font-size: 14px;">
                            üí° L∆∞u √Ω: Sau khi chuy·ªÉn kho·∫£n, s·ªë d∆∞ s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t t·ª± ƒë·ªông trong 1-5 ph√∫t
                        </div>
                    </div>
                    <button class="btn-primary" onclick="handleRecharge()">ƒê√£ Chuy·ªÉn Kho·∫£n</button>
                `;
            } else if (rechargeMethod === 'code') {
                return `
                    <div class="form-group">
                        <label>M√£ code khuy·∫øn m√£i</label>
                        <input type="text" id="promoCode" placeholder="Nh·∫≠p m√£ code">
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <p style="font-size: 14px; color: #d1d5db;">
                            Code demo: <span style="color: #fbbf24; font-weight: bold;">WELCOME2024</span> (+50,000ƒë)
                        </p>
                    </div>
                    <button class="btn-primary" onclick="handleRecharge()">X√°c Nh·∫≠n Code</button>
                `;
            }
        }

        function renderHistoryPage() {
            if (DB.history.length === 0) {
                return `
                    <div class="empty-state">
                        <div class="empty-icon">üì≠</div>
                        <h2>Ch∆∞a c√≥ giao d·ªãch n√†o</h2>
                        <p>L·ªãch s·ª≠ mua h√†ng c·ªßa b·∫°n s·∫Ω hi·ªÉn th·ªã t·∫°i ƒë√¢y</p>
                    </div>
                `;
            }

            return `
                <div class="banner" style="background: linear-gradient(45deg, #3b82f6, #06b6d4);">
                    <h1>üìú L·ªãch S·ª≠ Giao D·ªãch</h1>
                    <p>Theo d√µi t·∫•t c·∫£ giao d·ªãch c·ªßa b·∫°n</p>
                </div>

                ${DB.history.map(item => `
                    <div class="history-item">
                        <div class="history-icon">${item.type === 'account' ? 'üéÆ' : '‚ö°'}</div>
                        <div class="history-details">
                            <h3>${item.type === 'account' ? `Acc ${item.item.rank}` : item.item.name}</h3>
                            ${item.type === 'account' ? `
                                <div style="color: #9ca3af; margin-top: 5px;">
                                    ${item.item.heroes} t∆∞·ªõng ‚Ä¢ ${item.item.skins} skin ‚Ä¢ ${item.item.gems} ng·ªçc
                                </div>
                            ` : `
                                <div style="color: #9ca3af; margin-top: 5px;">
                                    Th·ªùi gian: ${item.item.time}
                                </div>
                            `}
                            <div style="color: #6b7280; font-size: 14px; margin-top: 8px;">
                                üïê ${item.date}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div class="history-price">-${formatMoney(item.price)}</div>
                            <div class="status-badge" style="margin-top: 10px;">Th√†nh c√¥ng</div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function renderAccountPage() {
            const accountCount = DB.history.filter(h => h.type === 'account').length;
            const rentalCount = DB.history.filter(h => h.type === 'rental').length;

            return `
                <div class="banner">
                    <h1>üë§ Th√¥ng Tin T√†i Kho·∫£n</h1>
                    <p>Qu·∫£n l√Ω th√¥ng tin c√° nh√¢n</p>
                </div>

                <div class="account-card">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 30px;">
                        <div class="avatar">üë§</div>
                        <div>
                            <h2 style="font-size: 28px; margin-bottom: 5px;">${currentUser.name}</h2>
                            <p style="color: #9ca3af;">${currentUser.email}</p>
                        </div>
                    </div>

                    <div style="background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px; text-align: center; margin: 30px 0;">
                        <p style="color: #9ca3af; margin-bottom: 10px;">S·ªë d∆∞ hi·ªán t·∫°i</p>
                        <div style="font-size: 48px; font-weight: bold; background: linear-gradient(45deg, #fbbf24, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                            ${formatMoney(currentUser.balance)}
                        </div>
                    </div>

                    <div class="stat-grid">
                        <div class="stat-card">
                            <p style="color: #9ca3af; margin-bottom: 10px;">ƒê√£ mua</p>
                            <div class="stat-value">${accountCount}</div>
                            <p style="color: #9ca3af; font-size: 14px; margin-top: 5px;">T√†i kho·∫£n</p>
                        </div>
                        <div class="stat-card">
                            <p style="color: #9ca3af; margin-bottom: 10px;">D·ªãch v·ª•</p>
                            <div class="stat-value">${rentalCount}</div>
                            <p style="color: #9ca3af; font-size: 14px; margin-top: 5px;">C√†y thu√™</p>
                        </div>
                    </div>

                    <button class="btn-logout" onclick="logout()">üö™ ƒêƒÉng Xu·∫•t</button>
                </div>
            `;
        }

        // Event Handlers
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            const user = DB.users.find(u => u.email === email && u.password === password);
            if (user) {
                currentUser = user;
                isLoggedIn = true;
                render();
            } else {
                alert('Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!');
            }
        }

        function logout() {
            currentUser = { id: 0, name: 'Kh√°ch', email: 'guest@shop.com', balance: 0 };
            isLoggedIn = false;
            currentPage = 'home';
            render();
        }

        function navigateTo(page) {
            currentPage = page;
            render();
        }

        function handleSearch(e) {
            searchTerm = e.target.value;
            render();
        }

        function handleFilter(e) {
            filterRank = e.target.value;
            render();
        }

        function buyAccount(id) {
            if (!isLoggedIn) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ mua t√†i kho·∫£n!');
                showLogin();
                return;
            }

            const account = DB.accounts.find(a => a.id === id);
            if (!account) return;

            if (currentUser.balance >= account.price) {
                currentUser.balance -= account.price;
                account.status = 'sold';
                
                DB.history.push({
                    id: Date.now(),
                    type: 'account',
                    item: account,
                    date: new Date().toLocaleString('vi-VN'),
                    price: account.price
                });

                alert('Mua t√†i kho·∫£n th√†nh c√¥ng! Th√¥ng tin ƒëƒÉng nh·∫≠p ƒë√£ ƒë∆∞·ª£c g·ª≠i v√†o email c·ªßa b·∫°n.');
                render();
            } else {
                alert('S·ªë d∆∞ kh√¥ng ƒë·ªß! Vui l√≤ng n·∫°p th√™m ti·ªÅn.');
                navigateTo('recharge');
            }
        }

        function selectPackage(id) {
            selectedPackage = DB.packages.find(p => p.id === id);
            render();
        }

        function bookRental() {
            if (!isLoggedIn) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒë·∫∑t d·ªãch v·ª•!');
                showLogin();
                return;
            }

            const accountInfo = document.getElementById('accountInfo').value;
            const tokenInfo = document.getElementById('tokenInfo').value;

            if (!accountInfo || !tokenInfo) {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
                return;
            }

            if (currentUser.balance >= selectedPackage.price) {
                currentUser.balance -= selectedPackage.price;
                
                DB.history.push({
                    id: Date.now(),
                    type: 'rental',
                    item: selectedPackage,
                    date: new Date().toLocaleString('vi-VN'),
                    price: selectedPackage.price,
                    account: accountInfo
                });

                alert('ƒê·∫∑t d·ªãch v·ª• c√†y thu√™ th√†nh c√¥ng! Ch√∫ng t√¥i s·∫Ω li√™n h·ªá b·∫°n s·ªõm.');
                selectedPackage = null;
                render();
            } else {
                alert('S·ªë d∆∞ kh√¥ng ƒë·ªß! Vui l√≤ng n·∫°p th√™m ti·ªÅn.');
                navigateTo('recharge');
            }
        }

        function setRechargeMethod(method) {
            rechargeMethod = method;
            render();
        }

        function handleRecharge() {
            if (!isLoggedIn) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ n·∫°p ti·ªÅn!');
                showLogin();
                return;
            }

            let amount = 0;

            if (rechargeMethod === 'card') {
                const cardAmount = document.getElementById('cardAmount').value;
                const cardSerial = document.getElementById('cardSerial').value;
                const cardCode = document.getElementById('cardCode').value;

                if (!cardAmount || !cardSerial || !cardCode) {
                    alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin th·∫ª!');
                    return;
                }
                amount = parseInt(cardAmount);
            } else if (rechargeMethod === 'code') {
                const code = document.getElementById('promoCode').value;
                if (code === 'WELCOME2024') {
                    amount = 50000;
                } else {
                    alert('M√£ code kh√¥ng h·ª£p l·ªá!');
                    return;
                }
            } else {
                amount = 100000; // Demo amount for MoMo and Bank
            }

            currentUser.balance += amount;
            alert(`N·∫°p ti·ªÅn th√†nh c√¥ng! S·ªë d∆∞ m·ªõi: ${formatMoney(currentUser.balance)}`);
            render();
        }

        function showLogin() {
            isLoggedIn = false;
            render();
        }

        function attachEventListeners() {
            // Event listeners are attached through onclick attributes in HTML
        }

        // Utility Functions
        function formatMoney(amount) {
            return amount.toLocaleString('vi-VN') + 'ƒë';
        }

        // Initialize
        render();
    </script>
</body>
</html>
